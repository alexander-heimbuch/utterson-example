machine:
  node:
    version: 4.1.0

dependencies:
  override:
    - git config --global user.email circleci@circleci
    - git config --global user.name CircleCI
    - git clone -b gh-pages https://github.com/alexander-heimbuch/utterson-example.git build
    - rm -rf build/*

test:
  override:
    - npm start

deployment:
  release:
    branch:
      - master
    commands:
      - cd build/ && git add --all
      - cd build/ && git commit -m "Update (`date '+%F %T %Z'`) [ci skip]"
      - cd build/ && git push --force origin gh-pages
